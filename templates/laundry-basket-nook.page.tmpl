{{template "base" .}}

{{define "content"}}
<!-- Hero with integrated gallery -->
<header class="hero hero--room">
  <div class="container position-relative">
    <!-- Overlay copy -->
    <div class="hero-copy text-center text-lg-start">
      <span class="badge rounded-pill px-3 py-2 mb-2 shadow-soft"
        >Snooze Spot • Laundry-Basket Nook</span
      >
      <h1 class="fw-bold mb-1">Laundry-Basket Nook</h1>
      <p class="lead mb-0">
        Crinkly comfort, blanket burrows, and the coziest post-zoomie cooldown.
      </p>
    </div>

    <!-- Gallery -->
    <div
      id="gallery-laundry"
      class="carousel slide carousel-fade rounded-4 overflow-hidden shadow-soft hero-gallery"
      data-bs-ride="carousel"
    >
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img
            src="/static/images/laundry-1.jpg"
            class="d-block w-100"
            alt="Laundry basket with soft blankets in warm light"
            loading="lazy"
            decoding="async"
          />
        </div>
        <div class="carousel-item">
          <img
            src="/static/images/laundry-2.jpg"
            class="d-block w-100"
            alt="Close-up of cozy blanket textures inside the basket"
            loading="lazy"
            decoding="async"
          />
        </div>
        <div class="carousel-item">
          <img
            src="/static/images/laundry-3.jpg"
            class="d-block w-100"
            alt="Nook view with nearby toy and water station"
            loading="lazy"
            decoding="async"
          />
        </div>
      </div>
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#gallery-laundry"
        data-bs-slide="prev"
        aria-label="Previous image"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#gallery-laundry"
        data-bs-slide="next"
        aria-label="Next image"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
      </button>
    </div>

    <!-- Thumbnail band -->
    <div class="thumbstrip mt-3" aria-label="Gallery thumbnails">
      <button
        class="thumb active"
        type="button"
        data-bs-target="#gallery-laundry"
        data-bs-slide-to="0"
        aria-label="Show image 1"
      >
        <img
          src="/static/images/laundry-1-thumb.jpg"
          alt="Thumbnail: laundry basket with blankets"
        />
      </button>
      <button
        class="thumb"
        type="button"
        data-bs-target="#gallery-laundry"
        data-bs-slide-to="1"
        aria-label="Show image 2"
      >
        <img
          src="/static/images/laundry-2-thumb.jpg"
          alt="Thumbnail: blanket textures"
        />
      </button>
      <button
        class="thumb"
        type="button"
        data-bs-target="#gallery-laundry"
        data-bs-slide-to="2"
        aria-label="Show image 3"
      >
        <img
          src="/static/images/laundry-3-thumb.jpg"
          alt="Thumbnail: nook view with toy and water"
        />
      </button>
    </div>
  </div>
</header>

<!-- Details -->
<section class="py-5">
  <div class="container">
    <div class="row g-4 align-items-start">
      <div class="col-lg-7">
        <h2 class="fw-bold mb-3">Crinkle. Curl. Conk out.</h2>
        <p class="text-secondary">
          The Laundry-Basket Nook is engineered for burrowing bliss—soft fleece
          layers, gentle basket walls, and just the right crinkle soundtrack.
          Ideal for biscuit-making, loaf mode, and dignified snores.
        </p>

        <ul class="list-unstyled small mb-4">
          <li class="mb-2">
            <i class="bi bi-basket2 me-2 text-primary"></i>Deep basket with cozy
            liner—fits a full regal curl
          </li>
          <li class="mb-2">
            <i class="bi bi-thermometer-sun me-2 text-primary"></i>Warmth
            retention for post-dryer daydreams
          </li>
          <li class="mb-2">
            <i class="bi bi-volume-down me-2 text-primary"></i>Soft, low noise
            environment (occasional dryer hum cameo)
          </li>
          <li class="mb-2">
            <i class="bi bi-stars me-2 text-primary"></i>Biscuit-making
            approved; purr-amplifying acoustics
          </li>
        </ul>

        <div class="row g-3">
          <div class="col-sm-6">
            <div class="p-3 border border-subtle rounded-4 h-100">
              <div class="small text-secondary">Best for</div>
              <div class="fw-semibold">Burrowers & Blanket Artists</div>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="p-3 border border-subtle rounded-4 h-100">
              <div class="small text-secondary">Vibe</div>
              <div class="fw-semibold">Cozy, crinkly, utterly snoozable</div>
            </div>
          </div>
        </div>

        <div class="mt-4">
          <a id="check-availability-button" href="#!" class="btn btn-accent">
            <i class="bi bi-calendar2-week me-2"></i>Check Availability
          </a>
        </div>
      </div>

      <!-- Facts card -->
      <div class="col-lg-5">
        <div
          class="p-4 bg-white border border-subtle rounded-4 h-100 d-flex flex-column justify-content-between"
        >
          <div>
            <h4 class="fw-bold">Quick facts</h4>
            <ul class="small text-secondary mb-4">
              <li>Location: Quiet alcove near linen closet</li>
              <li>Basket: Woven shell with removable, washable liner</li>
              <li>Textures: Soft fleece, layered for optimal burrow depth</li>
              <li>Noise: Low; occasional soothing dryer hum</li>
            </ul>

            <h4 class="fw-bold">Amenities</h4>
            <ul class="small text-secondary">
              <li>Fresh liner rotation</li>
              <li>Blanket burrowing permitted & encouraged</li>
              <li>Tiny toy stash within paw’s reach</li>
              <li>Water station a few paw-steps away</li>
            </ul>
          </div>

          <div class="d-flex align-items-center gap-2">
            <img
              src="/static/images/milo-avatar.png"
              class="rounded-circle"
              alt="Host Milo avatar"
              width="48"
              height="48"
            />
            <div class="small">
              <strong>Curated by Milo</strong><br /><span class="text-secondary"
                >Head of Hospitality</span
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}

{{ define "js" }}
<script>
  // SweetAlert2 Logic
  const alertBtn = document.getElementById("check-availability-button");
  if (alertBtn) {
    alertBtn.addEventListener("click", function () {
      let html = `
      <form id="check-availability-form" action="" method="POST" novalidate class="needs-validation">
        <div id="modal-reservation-dates" class="row">
          <div class="col">
            <input required class="form-control" type="text" name="start" id="start" placeholder="Arrival" autocomplete="off" />
          </div>
          <div class="col">
            <input required class="form-control" type="text" name="end" id="end" placeholder="Departure" autocomplete="off" />
          </div>
        </div>
      </form>`;
      attention.custom({
        msg: html,
        title: "Choose Your Dates",
        showConfirmButton: true,

        willOpen: () => {
          const modalElem = document.getElementById("modal-reservation-dates");
          new DateRangePicker(modalElem, {
            format: "mm/dd/yyyy",
            showOnFocus: true,
            minDate: new Date(),
            orientation: "top auto",
            container: Swal.getHtmlContainer(),
          });
        },
        
        callback: function (result) {
          console.log("called");

          // get the form and store a reference to it
          let form = document.getElementById("check-availability-form");
          // create a FormData object that contains all of the inputs
          let formData = new FormData(form);
          // append the CSRF Token
          formData.append("csrf_token", "{{.CSRFToken}}");
          
          formData.append("room_id", "3");

          // create a post action with the form data
          fetch('/search-availability-json', {
            method: "POST",
            body: formData,
          })
            .then(response => response.json())
            .then(data => {
              if (data.ok) {
                const href = `/book-room?id=${data.room_id}&s=${data.start_date}&e=${data.end_date}`;
                const html = `
                    <p>Room is available!</p>
                    <p><a href="${href}" class="btn btn-primary">Book now!</a></p>`;
                attention.custom({
                  icon: "success",
                  msg: html,
                  showConfirmButton: false,
                })
              } else {
                attention.error({
                  msg: "No availability",
                })
              }

            })
        }
      });
    });
  }
</script>

{{ end }}